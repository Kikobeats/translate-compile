<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>translate-compile by cainaf</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>translate-compile</h1>
        <h2>angular-translate angular pre-compiler markup translate-compile grunt plugin</h2>
        <a href="https://github.com/cainaf/translate-compile" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>
<a name="this-doc-is-being-updated-to-better-describe-tl-markup-language" class="anchor" href="#this-doc-is-being-updated-to-better-describe-tl-markup-language"><span class="octicon octicon-link"></span></a>This doc is being updated to better describe TL markup language.</h3>

<h1>
<a name="grunt-translate-compile" class="anchor" href="#grunt-translate-compile"><span class="octicon octicon-link"></span></a>grunt-translate-compile</h1>

<blockquote>
<p>A pre-compiler for angular-translate based on TL, a simple write-less markup designed for angular-translate.</p>

<p><a href="#user-content-translation-markup---tl">Checkout The Translation Markup</a></p>
</blockquote>

<h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<p>This plugin requires Grunt <code>~0.4.5</code></p>

<p>If you haven't used <a href="http://gruntjs.com/">Grunt</a> before, be sure to check out the <a href="http://gruntjs.com/getting-started">Getting Started</a> guide, as it explains how to create a <a href="http://gruntjs.com/sample-gruntfile">Gruntfile</a> as well as install and use Grunt plugins. Once you're familiar with that process, you may install this plugin with this command:</p>

<pre lang="shell"><code>npm install grunt-translate-compile --save-dev
</code></pre>

<p>Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:</p>

<div class="highlight highlight-js"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">'grunt-translate-compile'</span><span class="p">);</span>
</pre></div>

<h2>
<a name="translation-markup---tl" class="anchor" href="#translation-markup---tl"><span class="octicon octicon-link"></span></a>Translation Markup - TL</h2>

<p>The translation markup intends to drastically reduce the amount of typing needed to translate your app, by keeping it simpler and improving it's maintenance.
To learn more about the TL markup, <a href="http://cainaf.github.io/translate-compile">please refer to the full documentation</a>.</p>

<p>Briefing: A translation file begins with the declaration of all supported languages of your application. A custom numeric code (key) must be assigned to each one of the declared languages. In the sample that comes next, we're saying that [american english code is 1], [brazilian portuguese is 2] and [spanish from spain is 3]. Translation values are assigned directly to the language key.</p>

<p>Here goes a sample TL markup code:</p>

<div class="highlight highlight-js"><pre><span class="nx">LANGUAGES</span>
  <span class="mi">1</span><span class="o">:</span><span class="nx">enUs</span>
  <span class="mi">2</span><span class="o">:</span><span class="nx">ptBr</span>
  <span class="mi">3</span><span class="o">:</span><span class="nx">esEs</span>

<span class="nx">MENU</span>
  <span class="nx">USER</span>
    <span class="nx">LABEL</span>
      <span class="mi">1</span><span class="o">:</span><span class="nx">User</span>
      <span class="mi">2</span><span class="o">:</span><span class="nx">Usu</span><span class="err">치</span><span class="nx">rio</span>
      <span class="mi">3</span><span class="o">:</span><span class="nx">Usuario</span>
    <span class="nx">DROPDOWN</span>
      <span class="nx">EDIT</span>
        <span class="mi">1</span><span class="o">:</span><span class="nx">Edit</span>
        <span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">:</span><span class="nx">Editar</span>
      <span class="nx">LOGOUT</span>
        <span class="mi">1</span><span class="o">:</span><span class="nx">Logout</span>
        <span class="mi">2</span><span class="o">:</span><span class="nx">Sair</span>
        <span class="mi">3</span><span class="o">:</span><span class="nx">Finalizar</span> <span class="nx">la</span> <span class="nx">Sesi</span><span class="err">칩</span><span class="nx">n</span>
  <span class="nx">CART</span>
    <span class="nx">EMPTY</span>
      <span class="mi">1</span><span class="o">:</span><span class="nx">Empty</span> <span class="nx">Cart</span>
      <span class="mi">2</span><span class="o">:</span><span class="nx">Esvaziar</span> <span class="nx">Carrinho</span>
      <span class="mi">3</span><span class="o">:</span><span class="nx">Vaciar</span> <span class="nx">Carrito</span>
    <span class="nx">CHECKOUT</span>
      <span class="mi">1</span><span class="o">:</span><span class="nx">Checkout</span>
      <span class="mi">2</span><span class="o">:</span><span class="nx">Fechar</span> <span class="nx">Pedido</span>
      <span class="mi">3</span><span class="o">:</span><span class="nx">Realizar</span> <span class="nx">Pedido</span>
</pre></div>

<p>Compiling the above will result the bellow:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">angTranslations</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"enUs"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"MENU"</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">"USER"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"LABEL"</span><span class="o">:</span> <span class="s2">"User"</span><span class="p">,</span>
        <span class="s2">"DROPDOWN"</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">"EDIT"</span><span class="o">:</span> <span class="s2">"Edit"</span><span class="p">,</span>
          <span class="s2">"LOGOUT"</span><span class="o">:</span> <span class="s2">"Logout"</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">"CART"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"EMPTY"</span><span class="o">:</span> <span class="s2">"Empty Cart"</span><span class="p">,</span>
        <span class="s2">"CHECKOUT"</span><span class="o">:</span> <span class="s2">"Checkout"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">"ptBr"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"MENU"</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">"USER"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"LABEL"</span><span class="o">:</span> <span class="s2">"Usu치rio"</span><span class="p">,</span>
        <span class="s2">"DROPDOWN"</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">"EDIT"</span><span class="o">:</span> <span class="s2">"Editar"</span><span class="p">,</span>
          <span class="s2">"LOGOUT"</span><span class="o">:</span> <span class="s2">"Sair"</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">"CART"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"EMPTY"</span><span class="o">:</span> <span class="s2">"Esvaziar Carrinho"</span><span class="p">,</span>
        <span class="s2">"CHECKOUT"</span><span class="o">:</span> <span class="s2">"Fechar Pedido"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">"esEs"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"MENU"</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">"USER"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"LABEL"</span><span class="o">:</span> <span class="s2">"Usuario"</span><span class="p">,</span>
        <span class="s2">"DROPDOWN"</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">"EDIT"</span><span class="o">:</span> <span class="s2">"Editar"</span><span class="p">,</span>
          <span class="s2">"LOGOUT"</span><span class="o">:</span> <span class="s2">"Finalizar la Sesi칩n"</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">"CART"</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">"EMPTY"</span><span class="o">:</span> <span class="s2">"Vaciar Carrito"</span><span class="p">,</span>
        <span class="s2">"CHECKOUT"</span><span class="o">:</span> <span class="s2">"Realizar Pedido"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>

<p>Notice how the writing was significantly reduced as it's no longer needed to rewrite every key for each language, we are also skipping blocks and quotes. Thus we can focus in what really matters, the translations. Maintenance is also greatly improved, as adding a new key will no longer be a hunt for the right spot of each language.
Equal translations are also single written as multiple language keys may be assigned to a value (checkout 'user.dropdown.edit' key).</p>

<p><strong>Please refer to the <a href="http://cainaf.github.io/translate-compile">full documentation</a> for more examples and capabilities.</strong></p>

<h2>
<a name="the-translate_compile-task" class="anchor" href="#the-translate_compile-task"><span class="octicon octicon-link"></span></a>The "translate_compile" task</h2>

<h3>
<a name="overview" class="anchor" href="#overview"><span class="octicon octicon-link"></span></a>Overview</h3>

<h4>
<a name="1-add-the-task" class="anchor" href="#1-add-the-task"><span class="octicon octicon-link"></span></a>1. Add the task</h4>

<p>In your project's Gruntfile, add a section named <code>translate_compile</code> to the data object passed into <code>grunt.initConfig()</code>.</p>

<div class="highlight highlight-js"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="nx">translate_compile</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">compile</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// task-specific options go here. refer to options topic</span>
      <span class="p">},</span>
      <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// post-compiling file to the left, pre-compiling files to the right</span>
        <span class="s1">'compiled-translations.js'</span><span class="o">:</span> <span class="p">[</span><span class="s1">'translations/*.tl'</span><span class="p">]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h4>
<a name="2-let-your-server-know-about-it" class="anchor" href="#2-let-your-server-know-about-it"><span class="octicon octicon-link"></span></a>2. Let your server know about it</h4>

<p>Remember to include "translate_compile" inside your server task so the compilation takes place when you start it (connect/express). Something like:</p>

<div class="highlight highlight-js"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">'serve'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">grunt</span><span class="p">.</span><span class="nx">task</span><span class="p">.</span><span class="nx">run</span><span class="p">([</span>
      <span class="s1">'clean:server'</span><span class="p">,</span>
      <span class="s1">'translate_compile:compile'</span><span class="p">,</span> <span class="c1">// &lt;-- here it is</span>
      <span class="s1">'bowerInstall'</span><span class="p">,</span>
      <span class="s1">'concurrent:server'</span><span class="p">,</span>
      <span class="s1">'autoprefixer'</span><span class="p">,</span>
      <span class="s1">'connect:livereload'</span><span class="p">,</span>
      <span class="s1">'watch'</span>
    <span class="p">]);</span>
  <span class="p">});</span>
</pre></div>

<h4>
<a name="3-watch-it" class="anchor" href="#3-watch-it"><span class="octicon octicon-link"></span></a>3. Watch it</h4>

<p>For a better experience, watch for any changes made to your translation files (requires <a href="https://github.com/gruntjs/grunt-contrib-watch">grunt-contrib-watch</a>). Something like:</p>

<div class="highlight highlight-js"><pre><span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">tl</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s1">'translations/*.tl'</span><span class="p">],</span>
    <span class="nx">tasks</span><span class="o">:</span> <span class="p">[</span><span class="s1">'translate_compile:compile'</span><span class="p">],</span>
    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">livereload</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
</pre></div>

<h4>
<a name="4-take-it-to-your-build" class="anchor" href="#4-take-it-to-your-build"><span class="octicon octicon-link"></span></a>4. Take it to your build</h4>

<p>Add the "translate_compile" to your build task. Something like:</p>

<div class="highlight highlight-js"><pre><span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">'build'</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">'clean:dist'</span>
    <span class="s1">'bowerInstall'</span><span class="p">,</span>
    <span class="s1">'useminPrepare'</span><span class="p">,</span>
    <span class="s1">'concurrent:dist'</span><span class="p">,</span>
    <span class="s1">'autoprefixer'</span><span class="p">,</span>
    <span class="s1">'concat'</span><span class="p">,</span>
    <span class="s1">'ngmin'</span><span class="p">,</span>
    <span class="s1">'translate_compile:compile'</span><span class="p">,</span> <span class="c1">// &lt;-- here it is</span>
    <span class="s1">'copy:dist'</span><span class="p">,</span>
    <span class="s1">'cdnify'</span><span class="p">,</span>
    <span class="s1">'cssmin'</span><span class="p">,</span>
    <span class="s1">'uglify'</span><span class="p">,</span>
    <span class="s1">'rev'</span><span class="p">,</span>
    <span class="s1">'usemin'</span><span class="p">,</span>
    <span class="s1">'htmlmin'</span>
  <span class="p">]);</span>
</pre></div>

<h4>
<a name="you-should-now-be-good-to-go" class="anchor" href="#you-should-now-be-good-to-go"><span class="octicon octicon-link"></span></a>You should now be good to go!</h4>

<h3>
<a name="options" class="anchor" href="#options"><span class="octicon octicon-link"></span></a>Options</h3>

<h4>
<a name="optionstranslationvar" class="anchor" href="#optionstranslationvar"><span class="octicon octicon-link"></span></a>options.translationVar</h4>

<p>Type: <code>String</code>
Default value: <code>'angTranslations'</code></p>

<p>Determines the name of the compiled variable. Ex: <code>var angTranslations = {"usEn":{...}}</code></p>

<h4>
<a name="optionsmultipleobjects" class="anchor" href="#optionsmultipleobjects"><span class="octicon octicon-link"></span></a>options.multipleObjects</h4>

<p>Type: <code>Boolean</code>
Default value: <code>false</code></p>

<p>If <code>multipleObjects</code> is set to <code>true</code> there will no longer be only one root variable like <code>angTranslations</code>. Translations will now be splitted into one object per language. Ex: <code>var enUs = {...}; var ptBr = {...}; var esEs = {...};</code> Variable names will the ones declared in the <code>LANGUAGES</code> section.</p>

<h4>
<a name="optionsasjson" class="anchor" href="#optionsasjson"><span class="octicon octicon-link"></span></a>options.asJson</h4>

<p>Type: <code>Boolean</code>
Default value: <code>false</code></p>

<p>Should this value be set to true there will be no variable assignment inside the file, only the resulting json will be there.</p>

<h2>
<a name="contributing" class="anchor" href="#contributing"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>In lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed functionality. Lint and test your code using <a href="http://gruntjs.com/">Grunt</a>.</p>

<h2>
<a name="release-history" class="anchor" href="#release-history"><span class="octicon octicon-link"></span></a>Release History</h2>

<p><em>(Nothing yet)</em></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/cainaf/translate-compile/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/cainaf/translate-compile/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/cainaf/translate-compile"></a> is maintained by <a href="https://github.com/cainaf">cainaf</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38498266-4");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>